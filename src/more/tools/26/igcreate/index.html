<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Story Creator</title>
	<style>
		@font-face {
			font-family: Aveny T;
			src: url("font/avt.ttf");
		}
		@font-face {
			font-family: Cosmopolitan Script;
			src: url("font/cosmo.ttf");
		}
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
			background: black;
			display: flex;
			justify-content: center;
			align-items: center;
			min-height: 100vh;
			padding: 20px;
		}

		main {
			display: flex;
			gap: 20px;
			max-width: 1200px;
			width: 100%;
		}
		h4 {
			margin-bottom: 10px;
			font-weight: unset;
		}

		.canvas-wrapper {
			position: relative;
		}

		.story-canvas {
			width: 375px;
			height: 667px;
			border-radius: 20px;
			box-shadow: 0 20px 60px rgba(0,0,0,0.5);
			cursor: move;
			display: block;
		}

		#control-area {
			color: white;
			display: flex;
			flex-direction: column;
			gap: 10px;
		}
		#controls {
			display: flex;
			flex-direction: row;
			gap: 10px;
		}
		.row {
			display: flex;
			flex-direction: column;
			gap: 10px;
		}
		.control-group, #header {
			background-color: #242424;
			padding: 10px;
			border-radius: 15px;
		}
		#header {
			display: flex;
			justify-content: space-between;
		}
		textarea {
			width: 100%;
			padding: 12px;
			background: #2a2a2a;
			border: 1px solid #3a3a3a;
			border-radius: 10px;
			color: white;
			font-size: 16px;
			font-family: inherit;
			resize: vertical;
			min-height: 80px;
		}

		textarea:focus {
			outline: none;
			border-color: #667eea;
		}

		.gradient-grid {
			display: grid;
			grid-template-columns: repeat(6, 1fr);
			gap: 10px;
		}
		.gradient-option {
			width: 40px;
			height: 40px;
			border-radius: 50%;
			cursor: pointer;
		}
		.gradient-option:hover {
			transform: scale(1.05);
		}
		.gradient-option.active {
			border: 3px solid white;
		}

		.font-grid {
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			gap: 10px;
		}
		.font-option {
			width: 120px;
			height: 40px;
			border-radius: 10px;
			cursor: pointer;
			background: #2a2a2a;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 20px;
			color: white;
		}
		.font-option.active {
			color: black;
			background-color: white;
		}

		.font-size-control {
			display: flex;
			align-items: center;
			gap: 15px;
		}

		input[type="range"] {
			flex: 1;
			height: 6px;
			background: #3a3a3a;
			border-radius: 5px;
			outline: none;
			-webkit-appearance: none;
		}

		input[type="range"]::-webkit-slider-thumb {
			-webkit-appearance: none;
			appearance: none;
			width: 20px;
			height: 20px;
			background: #667eea;
			cursor: pointer;
			border-radius: 50%;
		}

		input[type="range"]::-moz-range-thumb {
			width: 20px;
			height: 20px;
			background: #667eea;
			cursor: pointer;
			border-radius: 50%;
			border: none;
		}

		.size-value {
			min-width: 40px;
			text-align: right;
			font-weight: 600;
		}

		.color-picker-group {
			display: flex;
			gap: 10px;
			align-items: center;
		}

		input[type="color"] {
			width: 50px;
			height: 50px;
			border: none;
			border-radius: 10px;
			cursor: pointer;
			background: transparent;
		}

		input[type="color"]::-webkit-color-swatch-wrapper {
			padding: 0;
		}

		input[type="color"]::-webkit-color-swatch {
			border: 3px solid #3a3a3a;
			border-radius: 10px;
		}

		.download-btn {
			width: 100%;
			padding: 15px;
			background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
			border: none;
			border-radius: 10px;
			color: white;
			font-size: 16px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.3s;
		}

		.download-btn:hover {
			transform: translateY(-2px);
			box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
		}

		.download-btn:active {
			transform: translateY(0);
		}

		@media (max-width: 900px) {
			main {
				flex-direction: column;
				align-items: center;
			}
			
			#control-area {
				max-width: 375px;
			}
		}
	</style>
</head>
<body>
	<main>
		<div class="canvas-wrapper">
			<canvas id="canvas" class="story-canvas" width="375" height="667"></canvas>
		</div>
		<div id="control-area">
			<div id="header">
				<h1>IG Create Mode Online</h1>
				<div>
					<button class="download-btn" id="downloadBtn">ðŸ“¥ Download Story</button>
				</div>
			</div>
			<div id="controls">
				<div class="row">
					<div class="control-group">
						<h3>Text</h3>
						<textarea id="textInput" placeholder="Enter your text...">Tap to edit text</textarea>
					</div>
					<div class="control-group">
						<h3>Font Size</h3>
						<div class="font-size-control">
							<input type="range" id="fontSize" min="16" max="72" value="32">
							<span class="size-value" id="fontSizeValue">32px</span>
						</div>
					</div>
					<div class="control-group">
						<h3>Text Color</h3>
						<div class="color-picker-group">
							<input type="color" id="textColor" value="#ffffff">
						</div>
					</div>
				</div>
				<div class="row">
					<div class="control-group">
						<h3>Background</h3>
						<h4>Modern (Type 2018)</h4>
						<div class="gradient-grid">
							<div class="gradient-option active" style="background: linear-gradient(45deg, #f88140 0%, #a828b3 100%);" id="b-18-m1" onclick="setBackground(0);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #34baf1 0%, #9c2fbc 100%);" id="b-18-m2" onclick="setBackground(1);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #d7ac4e 0%, #ee4957 100%);" id="b-18-m3" onclick="setBackground(2);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #60a344 0%, #28c4f4 100%);" id="b-18-m4" onclick="setBackground(3);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #b3075b 0%, #e84fff 100%);" id="b-18-m5" onclick="setBackground(4);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #2f81cd 0%, #28c4f5 100%);" id="b-18-m6" onclick="setBackground(5);"></div>
						</div>
						<h4>Neon (Type 2018)</h4>
						<div class="gradient-grid">
							<div class="gradient-option" style="background: linear-gradient(45deg, #24002a 0%, #7e0091 100%);" id="b-18-n1" onclick="setBackground(6);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #d981ab 0%, #b00053 100%);" id="b-18-n2" onclick="setBackground(7);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #0389b2 0%, #00274c 100%);" id="b-18-n3" onclick="setBackground(8);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #202020 0%, #363636 100%);" id="b-18-n4" onclick="setBackground(9);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #7d010c 0%, #000000 100%);" id="b-18-n5" onclick="setBackground(10);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #195000 0%, #000000 100%);" id="b-18-n6" onclick="setBackground(11);"></div>
						</div>
						<h4>Typewriter (Type 2018)</h4>
						<div class="gradient-grid">
							<div class="gradient-option" style="background: linear-gradient(45deg, #939393 0%, #eeeeee 100%);" id="b-18-t1" onclick="setBackground(12);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #202020 0%, #737172 100%);" id="b-18-t2" onclick="setBackground(13);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #d3c973 0%, #fef8e3 100%);" id="b-18-t3" onclick="setBackground(14);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #b9a282 0%, #b9b09f 100%);" id="b-18-t4" onclick="setBackground(15);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #400008 0%, #6e0006 100%);" id="b-18-t5" onclick="setBackground(16);"></div>
						</div>
						<h4>Strong (Type 2018)</h4>
						<div class="gradient-grid">
							<div class="gradient-option" style="background: linear-gradient(45deg, #ca3e49 0%, #0f0e0c 100%);" id="b-18-s1" onclick="setBackground(17);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #6ebfda 0%, #28c4f5 100%);" id="b-18-s2" onclick="setBackground(18);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #a9a9a9 0%, #fafafa 100%);" id="b-18-s3" onclick="setBackground(19);"></div>
							<div class="gradient-option" style="background: linear-gradient(45deg, #000000 0%, #262626 100%);" id="b-18-s4" onclick="setBackground(20);"></div>
						</div>
						<h4>Create (2019)</h4>
						<div class="gradient-grid">
							<div class="gradient-option" style="background: linear-gradient(135deg, #cb31e2 0%, #fc8d33 100%);" id="b-19-1" onclick="setBackground(21);"></div>
							<div class="gradient-option" style="background: linear-gradient(135deg, #c731e3 0%, #5fb0ff 100%);" id="b-19-2" onclick="setBackground(22);"></div>
							<div class="gradient-option" style="background: linear-gradient(135deg, #6dc056 0%, #28c4f4 100%);" id="b-19-3" onclick="setBackground(23);"></div>
							<div class="gradient-option" style="background: linear-gradient(135deg, #ea4a59 0%, #fdca5c 100%);" id="b-19-4" onclick="setBackground(24);"></div>
							<div class="gradient-option" style="background: linear-gradient(135deg, #cb2fe3 0%, #fe6876 100%);" id="b-19-5" onclick="setBackground(25);"></div>
							<!-- this one should be rainbow -->
							<div class="gradient-option" style="background: linear-gradient(135deg, #cb31e2 0%, #fc8d33 100%);" id="b-19-6" onclick="setBackground(26);"></div>
							<div class="gradient-option" style="background: #262626;" id="b-19-7" onclick="setBackground(27);"></div>
							<div class="gradient-option" style="background: #dbdbdb;" id="b-19-8" onclick="setBackground(28);"></div>
						</div>
						<h4>Current (2024)</h4>
						<div class="gradient-grid">
							<div class="gradient-option" style="background-image: url(img/bg/t/1.jpg);"></div>
							<div class="gradient-option" style="background-image: url(img/bg/t/2.jpg);"></div>
							<div class="gradient-option" style="background-image: url(img/bg/t/3.jpg);"></div>
							<div class="gradient-option" style="background-image: url(img/bg/t/4.jpg);"></div>
							<div class="gradient-option" style="background-image: url(img/bg/t/5.jpg);"></div>
						</div>
					</div>
				</div>

				<div class="control-group">
					<label>Font Style</label>
					<div class="font-grid" id="fontGrid"></div>
				</div>
			</div>
		</div>
	</main>

	<script>
		const gradients = [
			{ name: '18-m1', colors: ['#f88140', '#a828b3'], rot: '45deg' },
			{ name: '18-m2', colors: ['#34baf1', '#9c2fbc'], rot: '45deg' },
			{ name: '18-m3', colors: ['#d7ac4e', '#ee4957'], rot: '45deg' },
			{ name: '18-m4', colors: ['#60a344', '#28c4f4'], rot: '45deg' },
			{ name: '18-m5', colors: ['#b3075b', '#e84fff'], rot: '45deg' },
			{ name: '18-m6', colors: ['#2f81cd', '#28c4f5'], rot: '45deg' },
			{ name: '18-n1', colors: ['#24002a', '#7e0091'], rot: '45deg' },
			{ name: '18-n2', colors: ['#d981ab', '#b00053'], rot: '45deg' },
			{ name: '18-n3', colors: ['#0389b2', '#00274c'], rot: '45deg' },
			{ name: '18-n4', colors: ['#202020', '#363636'], rot: '45deg' },
			{ name: '18-n5', colors: ['#7d010c', '#000000'], rot: '45deg' },
			{ name: '18-n6', colors: ['#195000', '#000000'], rot: '45deg' },
			{ name: '18-t1', colors: ['#939393', '#eeeeee'], rot: '45deg' },
			{ name: '18-t2', colors: ['#202020', '#737172'], rot: '45deg' },
			{ name: '18-t3', colors: ['#d3c973', '#fef8e3'], rot: '45deg' },
			{ name: '18-t4', colors: ['#b9a282', '#b9b09f'], rot: '45deg' },
			{ name: '18-t5', colors: ['#400008', '#6e0006'], rot: '45deg' },
			{ name: '18-s1', colors: ['#ca3e49', '#0f0e0c'], rot: '45deg' },
			{ name: '18-s2', colors: ['#6ebfda', '#28c4f5'], rot: '45deg' },
			{ name: '18-s3', colors: ['#a9a9a9', '#fafafa'], rot: '45deg' },
			{ name: '18-s4', colors: ['#000000', '#262626'], rot: '45deg' },
			{ name: '19-1', colors: ['#cb31e2', '#fc8d33'], rot: '135deg' },
			{ name: '19-2', colors: ['#c731e3', '#5fb0ff'], rot: '135deg' },
			{ name: '19-3', colors: ['#6dc056', '#28c4f4'], rot: '135deg' },
			{ name: '19-4', colors: ['#ea4a59', '#fdca5c'], rot: '135deg' },
			{ name: '19-5', colors: ['#cb2fe3', '#fe6876'], rot: '135deg' },
			{ name: '19-6', colors: ['#000000', '#262626'], rot: '135deg' },
			{ name: '19-7', colors: ['#262626', '#262626'], rot: '135deg' },
			{ name: '19-8', colors: ['#dbdbdb', '#dbdbdb'], rot: '135deg' }
		];

		const fonts = [
			{ name: 'Classic', family: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif' },
			{ name: "Modern", family: "Aveny T" },
		];

		const canvas = document.getElementById('canvas');
		const ctx = canvas.getContext('2d');
		const textInput = document.getElementById('textInput');
		const gradientGrid = document.getElementById('gradientGrid');
		const fontGrid = document.getElementById('fontGrid');
		const fontSize = document.getElementById('fontSize');
		const fontSizeValue = document.getElementById('fontSizeValue');
		const textColor = document.getElementById('textColor');
		const downloadBtn = document.getElementById('downloadBtn');

		let currentText = 'Tap to edit text';
		let currentFontSize = 32;
		let currentFont = fonts[0].family;
		let currentColor = '#ffffff';
		let currentBackground = null;
		let backgroundImage = null;
		let textX = canvas.width / 2;
		let textY = canvas.height / 2;
		let dragOffsetX = 0;
		let dragOffsetY = 0;

		// Draw initial canvas
		function drawCanvas() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);

			// Draw background
			if (backgroundImage) {
				const scale = Math.max(canvas.width / backgroundImage.width, canvas.height / backgroundImage.height);
				const x = (canvas.width / 2) - (backgroundImage.width / 2) * scale;
				const y = (canvas.height / 2) - (backgroundImage.height / 2) * scale;
				ctx.drawImage(backgroundImage, x, y, backgroundImage.width * scale, backgroundImage.height * scale);
			} else if (currentBackground) {
				const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
				gradient.addColorStop(0, currentBackground.colors[0]);
				gradient.addColorStop(1, currentBackground.colors[1]);
				ctx.fillStyle = gradient;
				ctx.fillRect(0, 0, canvas.width, canvas.height);
			}

			// Draw text with shadow
			ctx.save();
			ctx.font = `bold ${currentFontSize}px ${currentFont}`;
			ctx.fillStyle = currentColor;
			ctx.textAlign = 'center';
			ctx.textBaseline = 'middle';
			
			// Add text shadow
			ctx.shadowColor = 'rgba(0, 0, 0, 0.3)';
			ctx.shadowBlur = 8;
			ctx.shadowOffsetX = 0;
			ctx.shadowOffsetY = 2;

			// Word wrap
			const maxWidth = canvas.width * 0.9;
			const words = currentText.split(' ');
			const lines = [];
			let currentLine = words[0];

			for (let i = 1; i < words.length; i++) {
				const testLine = currentLine + ' ' + words[i];
				const metrics = ctx.measureText(testLine);
				if (metrics.width > maxWidth) {
					lines.push(currentLine);
					currentLine = words[i];
				} else {
					currentLine = testLine;
				}
			}
			lines.push(currentLine);

			const lineHeight = currentFontSize * 1.2;
			const totalHeight = lines.length * lineHeight;
			const startY = textY - (totalHeight / 2) + (lineHeight / 2);

			lines.forEach((line, i) => {
				ctx.fillText(line, textX, startY + (i * lineHeight));
			});

			ctx.restore();
		}

		function setBackground(bgNum) {
			document.getElementById(`b-${currentBackground.name}`).classList.remove('active');
			currentBackground = gradients[bgNum];
			document.getElementById(`b-${currentBackground.name}`).classList.add('active');
			drawCanvas();
		}
		currentBackground = gradients[0];
		setBackground(0);

		// Create font options
		fonts.forEach((font, index) => {
			const div = document.createElement('div');
			div.className = 'font-option';
			if (index === 0) div.classList.add('active');
			div.textContent = font.name;
			div.style.fontFamily = font.family;
			div.addEventListener('click', () => {
				currentFont = font.family;
				document.querySelectorAll('.font-option').forEach(el => el.classList.remove('active'));
				div.classList.add('active');
				drawCanvas();
			});
			fontGrid.appendChild(div);
		});

		// Text input
		textInput.addEventListener('input', (e) => {
			currentText = e.target.value || 'Tap to edit text';
			drawCanvas();
		});

		// Font size
		fontSize.addEventListener('input', (e) => {
			currentFontSize = parseInt(e.target.value);
			fontSizeValue.textContent = currentFontSize + 'px';
			drawCanvas();
		});

		// Text color
		textColor.addEventListener('input', (e) => {
			currentColor = e.target.value;
			drawCanvas();
		});
		// Download functionality
		downloadBtn.addEventListener('click', () => {
			const link = document.createElement('a');
			link.download = 'instagram-story.png';
			link.href = canvas.toDataURL('image/png');
			link.click();
		});
	</script>
</body>
</html>